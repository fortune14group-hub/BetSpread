import { format } from 'date-fns'; import { sv } from 'date-fns/locale'; export type Resultat='PENDING'|'SITTER'|'SITTER_EJ'|'VOID'; export type Bet={id:string;utskick:string;matchdag:string;match:string;market:string;odds:number;unitsize:number;resultat:Resultat;bookmaker:'Bet365'; user_id?:string|null}; export type Store={bets:Bet[]}; export function monthNameSV(iso:string){try{return format(new Date(iso),'LLLL',{locale:sv}).replace(/^./,c=>c.toUpperCase())}catch{return''}} export function returnsForBet(b:Bet){const s=b.unitsize,o=b.odds,r=b.resultat;if(r==='SITTER')return s*o;if(r==='VOID')return s;if(r==='SITTER_EJ')return 0;return 0} export function profitForBet(b:Bet){const s=b.unitsize,o=b.odds,r=b.resultat;if(r==='SITTER')return s*(o-1);if(r==='SITTER_EJ')return -s;if(r==='VOID')return 0;return 0} const KEY='betspread_web_v1'; export function load():Store{try{const raw=localStorage.getItem(KEY);return raw?JSON.parse(raw):{bets:[]}}catch{return{bets:[]}}} export function save(store:Store){localStorage.setItem(KEY, JSON.stringify(store))} export const SUPABASE_URL=import.meta.env.VITE_SUPABASE_URL as string|undefined; export const SUPABASE_ANON=import.meta.env.VITE_SUPABASE_ANON_KEY as string|undefined;